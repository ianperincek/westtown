---
//import { ViewTransitions } from "astro:transitions";

import client from "@data/client.json";
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";
import "@styles/root.scss";
import "@styles/interactivegrid.css";
import "@styles/dark.scss";


const {description, title} = Astro.props;

---
<script>
function pageSlide() {
  return {
    duration: 800,
    easing: 'ease-in-out',
    keyframes: [
      { transform: 'translateY(100%)', opacity: 0 },
      { transform: 'translateY(0)', opacity: 1 }
    ]
  };
}
</script>
<!-- A fully fleshed-out <head>, dynamically changing based on client.json and the page front matter -->
<html lang="en">
        <head>
            <!-- View Transitions support -->
            <!-- <ViewTransitions  /> -->

            <!-- Standard meta tags -->
            <meta charset="UTF-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta name="description" content={description}>
            <meta name="keywords" content="">
            <link rel="canonical" href={`https://${client.domain}${Astro.url.pathname}`}>
    
            <!--Social Media Display-->
            <meta property="og:title" content={title} />
            <meta property="og:description" content={description} />
            <meta property="og:type" content="website" />
            <meta property="og:url" content={`https://${client.domain}${Astro.url.pathname}`} />
            <meta property="og:image" content="/assets/images/logo-small.png" />
            <meta property="og:image:secure_url" content="/assets/images/logo-small.png" />
    
            <!--Favicons-->
            <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png">
            <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png?v1">
            <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png">
            <link rel="manifest" href="/assets/favicons/site.webmanifest">
            <meta name="msapplication-TileColor" content="#da532c">
            <meta name="theme-color" content="#ffffff">
            <link
            rel="preload"
            as="image"
            href="https://www.westtownwebsites.com/assets/images/test/Texture2.svg"
          />
            
            <link rel="sitemap" href="/sitemap-0.xml" />
            <script type="application/ld+json">
              {
                "@context": "https://schema.org",
                "@type": "LocalBusiness",
                "name": "Westtown Websites",
                "image": "https://westtownwebsites.com/logo.png",
                "@id": "https://westtownwebsites.com",
                "url": "https://westtownwebsites.com",
                "telephone": "+1-630-984-1787",
                "address": {
                  "@type": "PostalAddress",
                  "streetAddress": "834 N Ashland Ave 4N",
                  "addressLocality": "Chicago",
                  "addressRegion": "IL",
                  "postalCode": "60622",
                  "addressCountry": "US"
                },
                "openingHoursSpecification": [
                  {
                    "@type": "OpeningHoursSpecification",
                    "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
                    "opens": "09:00",
                    "closes": "17:00"
                  }
                ],
                // "sameAs": [
                //   "https://www.facebook.com/westtownwebsites",
                //   "https://www.linkedin.com/company/westtownwebsites"
                // ],
                "priceRange": "$$",
                "description": "Westtown Websites builds high-performing, SEO-optimized websites for small businesses, offering affordable pricing plans starting at $175/month.",
                "geo": {
                  "@type": "GeoCoordinates",
                  "latitude": "41.8957",
                  "longitude": "-87.6676"
                }
              }
            </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Westtown Websites - Custom Web Design",
        "url": "https://westtownwebsites.com",
        "description": "Westtown Websites offers custom, high-performance web design services for small businesses. Starting at $175/month, we help businesses grow with professional, SEO-optimized websites.",
        "breadcrumb": {
          "@type": "BreadcrumbList",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "name": "Home",
              "item": "https://westtownwebsites.com"
            },
            {
              "@type": "ListItem",
              "position": 2,
              "name": "Services",
              "item": "https://westtownwebsites.com/services"
            }
          ]
        }
      }
    </script>
    
         <!-- Organization Schema (JSON-LD) for Westtown Websites -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Westtown Websites",
      "url": "https://westtownwebsites.com",
      "logo": "https://westtownwebsites.com/logo.png",
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+1-630-984-1787",
        "contactType": "Customer Service",
        "areaServed": "US",
        "availableLanguage": "English"
      }
      // "sameAs": [
      //   "https://www.facebook.com/westtownwebsites",
      //   "https://www.linkedin.com/company/westtownwebsites"
      // ]
    }
  </script>
           
            <title>
                {Astro.url.pathname === "/" ?  (`${ title }
                |
                ${ client.name }
                |
                ${ client.address.city },
                ${ client.address.state }`) :
                (`${ title }
                    |
                    ${ client.name }`)
            }
            </title>

            <!-- Decap CMS scripts -->
            {Astro.url.pathname === "/" &&
                <script defer src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
                <script defer>
                    if (window.netlifyIdentity) {
                        window
                            .netlifyIdentity
                            .on('init', (user) => {
                                if (!user) {
                                    window
                                        .netlifyIdentity
                                        .on('login', () => {
                                            document.location.href = '/admin/';
                                        });
                                }
                            });
                    }
                </script>
            }
        </head>
     
        <body>
          
            <!--Screen reader skip main nav-->
            <a class="skip" aria-label="skip to main content" href="#main">Click To Skip To Main Content</a>
    
            <Header />
            
    <main id="main" class="main" >
                <slot/>
            </main>
            <Footer />
            
            
    <script src="/assets/js/gsap.min.js" defer></script>
    <script src="/assets/js/ScrollToPlugin.min.js" defer></script>
    <script src="/assets/js/ScrollTrigger.min.js" defer></script>
    <script>
      window.addEventListener('load', function() {
        setTimeout(function() {
          var gtagScript = document.createElement('script');
          gtagScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-VM8MYLJ7FB';
          gtagScript.async = true;
          document.head.appendChild(gtagScript);
  
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-VM8MYLJ7FB');
        }, 3000); // 3-second delay
      });
    </script>

        </body>
</html>



<script is:inline>
    // helper functions to toggle dark mode
    function enableDarkMode() {
      document.body.classList.add("dark-mode");
      localStorage.setItem("theme", "dark");
    }
  
    function disableDarkMode() {
      document.body.classList.remove("dark-mode");
      localStorage.setItem("theme", "light");
    }
  
    function setTheme() {
      // default to the light theme
      let theme = "light";
  
      // check localStorage for a saved 'theme' variable. if it's there, the user has visited before, so apply the necessary theme choices
      // if (localStorage.getItem("theme")) {
      //   theme = localStorage.getItem("theme");
      // }
      // if it's not there, check to see if the user has applied dark mode preferences themselves in the browser
      // else if (
      //   window.matchMedia &&
      //   window.matchMedia("(prefers-color-scheme: dark)").matches
      // ) {
      //   theme = "dark";
      // }
  
      // if there is no preference set, the default of light will be used. apply accordingly
      theme === "dark" ? enableDarkMode() : disableDarkMode();
    }
  
    setTheme();
  
    document.addEventListener("astro:after-swap", setTheme); // For View Transitions purposes - astro:after-swap ensures that the theme is kept after navigating to a new page.
  </script>